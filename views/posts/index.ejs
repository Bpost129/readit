<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/posts/index.css">
<%- include('../partials/nav') %>

<main>
  <div>
    <% posts.reverse() %>
    <% posts.forEach(post => { %>
      <div class="post-div">
        <div class="author-div">
          <img class="avatar" src="<%= post.author.avatar %>" alt="avatar">
          <p class="author"><%= post.author.name %></p>
          <p class="time" ><%= post.createdAt %></p>
        </div>
        <a href="/posts/<%= post._id %>">
          <div class="content-div">
            <div><%= post.title %></div>
            <% if (post.imageUrl) { %>
            <img id="post-image" src="<%= post.imageUrl %>" alt="custom image">
            <% } %>
            <p><%= post.text %></p>
          </div>
        </a>
        <div class="social-div">
          <div class="social-btn">
            <!-- likes -->
            <a href="/posts/<%= post._id %>/like" id="like"><i class="fas fa-solid fa-angle-up" style="color: white;"></i></a>
            <div id="likes"><%= post.likes.length - post.dislikes.length %></div>
            <a href="/posts/<%= post._id %>/dislike" id="dislike"><i class="fas fa-solid fa-angle-down" style="color: white;"></i></a>
          </div>
          <a href="/posts/<%= post._id %>">
            <div class="social-btn">
              <div id="num-comments"><%= post.comments.length %></div>
              <div><i class="fas fa-solid fa-comment" style="color: white;"></i></div>
            </div>
          </a>
        </div>
      </div>
    <% }) %>
  </div>
</main>

<%- include('../partials/footer') %>